# Техническое задание: Парсинг рейтингов облигаций

## 1. Цель проекта
Разработка скрипта для автоматического сбора рейтингов и их цветовых индикаторов для облигаций из файла `bonds_filter.csv`.

## 2. Исходные данные
- Входной файл: `output/bonds_filter.csv`
- Формат файла: CSV с разделителем ';'
- Содержит информацию об облигациях, включая ISIN

## 3. Требования к функциональности
### 3.1. Основные функции
1. Чтение данных из входного файла
2. Последовательная обработка каждой облигации
3. Получение рейтинга и его цветового индикатора с сайта smart-lab.ru
4. Запись результатов в выходной файл

### 3.2. Обработка данных
- Для каждой облигации:
  - Формирование URL вида: `https://smart-lab.ru/q/bonds/{ISIN}/`
  - Парсинг HTML страницы для получения:
    - Значения рейтинга
    - Цвета индикатора (Красный/Желтый/Зеленый)
  - Добавление полученных данных в строку облигации

### 3.3. Формат выходных данных
- Выходной файл: `output/bonds_with_ratings.csv`
- Формат: CSV с разделителем ';'
- Структура: все колонки из входного файла + две новые колонки:
  - Рейтинг (после колонки со ставкой)
  - Цвет рейтинга (после колонки с рейтингом)

## 4. Технические требования
### 4.1. Обработка ошибок
- Корректная обработка отсутствующих данных
- Обработка ошибок при запросах к сайту
- Логирование критических ошибок

### 4.2. Производительность
- Задержка между запросами: 5 секунд
- Использование User-Agent для имитации браузера
- Таймаут запросов: 15 секунд

### 4.3. Используемые библиотеки
- requests: для HTTP-запросов
- BeautifulSoup4: для парсинга HTML
- csv: для работы с CSV-файлами
- logging: для логирования ошибок

## 5. Критерии успешности
1. Корректное чтение всех облигаций из входного файла
2. Успешное получение рейтингов и их цветов для всех облигаций
3. Корректная запись результатов в выходной файл
4. Обработка всех возможных ошибок без прерывания работы скрипта

## 6. Ограничения
- Не использовать многопоточность для избежания блокировки IP
- Не сохранять промежуточные HTML-файлы
- Минимизировать вывод в консоль (только прогресс и ошибки)

## 7. Дополнительные требования
- Кодировка выходного файла: UTF-8 с BOM
- Сохранение структуры данных входного файла
- Корректная обработка специальных символов 